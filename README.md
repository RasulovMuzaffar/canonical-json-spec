# Canonical JSON Specification

Этот репозиторий содержит **референс-реализацию canonical JSON** (canonicalJson) на нескольких языках:

- Java
- C#
- Python
- Go
- PHP

Цель canonicalJson — получить **детерминированное строковое представление JSON**, пригодное для:

- вычисления хэшей (`publisherHash = base64( SHA-256(canonicalJson(...)) )`)
- формирования данных для цифровой подписи (`publisherSign`, `centerSign`)
- проверки целостности и авторства сообщений в интеграционных системах (например, push-/pub-sub-сервисы, e-gov, B2B-интеграции)

## Алгоритм canonicalJson

Для любого JSON-значения `V`:

1. Если `V` — **объект** (map):
   - все поля упорядочиваются по ключу в **лексикографическом порядке** (по алфавиту, сравнение строковое, `String`/`char`-сравнение);
   - для каждого значения рекурсивно применяется canonicalJson.

2. Если `V` — **массив**:
   - порядок элементов **сохраняется**;
   - к каждому элементу рекурсивно применяется canonicalJson.

3. Если `V` — **примитив** (`string`, `number`, `boolean`, `null`):
   - значение возвращается без изменений.

4. Строковый вывод:
   - используется **компактный JSON** без лишних пробелов и переносов строк (minified);
   - при наличии опций — **Unicode-символы не экранируются**, чтобы `"тест"` не превращалось в `"\\u0442\\u0435\\u0441\\u0442"`.

## Пример

Вход (`examples/example1_input.json`):

```json
{
  "z": 1,
  "a": { "k": 2, "b": 1 },
  "list": [ { "x": 2, "a": 1 }, 3 ]
}
```

Результат (`examples/example1_canonical.json`):

```json
{"a":{"b":1,"k":2},"list":[{"a":1,"x":2},3],"z":1}
```
