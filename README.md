# Canonical JSON Specification

Этот репозиторий содержит **референс-реализацию Canonical JSON** (далее `canonicalJson`) на нескольких языках:

- Java
- C#
- Python
- Go
- PHP

## Назначение

Canonical JSON — это способ преобразования произвольной JSON-структуры  
в **строго детерминированное строковое представление**, которое:

- всегда одинаково для одинаковых входных данных;
- не зависит от языка программирования, библиотеки сериализации или окружения;
- гарантирует предсказуемость порядка ключей и формы вывода.

Такое детерминированное представление используется во множестве задач, включая:

- вычисление криптографических хэшей (SHA-256, SHA-512 и др.);
- создание и проверку цифровых подписей;
- контроль целостности данных в распределённых системах;
- построение устойчивых идентификаторов объектов;
- хранение и сравнение JSON-структур в неизменяемом виде;
- формирование журналов и аудита, требующих точного бинарного соответствия строк.

Canonical JSON не определяет семантику обмена данными и не зависит  
от конкретного протокола или бизнес-логики. Это **универсальная утилита**,  
которая обеспечивает единообразное и повторяемое представление JSON  
в любых архитектурах и экосистемах.
---

## Алгоритм `canonicalJson`

Для любого JSON-значения `V`:

1. **Объект (map / dictionary)**  
   Если `V` — объект (JSON object):

   - все поля объекта сортируются по ключу  
     **в лексикографическом порядке** (по алфавиту, `String`-сравнение);
   - для каждого значения рекурсивно применяется `canonicalJson`.

2. **Массив (array)**  
   Если `V` — массив:

   - порядок элементов **сохраняется** (не сортируется);
   - к каждому элементу рекурсивно применяется `canonicalJson`.

3. **Примитивы (primitive)**  
   Если `V` — примитив (`string`, `number`, `boolean`, `null`):

   - значение возвращается **без изменений**.

4. **Строковый вывод**

   - используется компактный JSON **без пробелов и переносов** (minified);
   - при наличии опций библиотек — **Unicode-символы не экранируются**,  
     чтобы `"тест"` не превращалось в `"\\u0442\\u0435\\u0441\\u0442"`.

---

## Пример

Вход (`examples/example1_input.json`):

```json
{
  "z": 1,
  "a": { "k": 2, "b": 1 },
  "list": [ { "x": 2, "a": 1 }, 3 ]
}
```

Результат (`examples/example1_canonical.json`):

```json
{"a":{"b":1,"k":2},"list":[{"a":1,"x":2},3],"z":1}
```
